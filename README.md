# 智能猫窝系统

## 项目介绍
智能猫窝系统是一个为嵌入式比赛开发的项目，旨在通过现代传感技术和人工智能为宠物猫提供全方位的照顾。本系统能够实现智能投喂补水、自动铲屎等基础功能，同时融合了先进的图像识别技术，可以对猫咪的健康状况进行实时监测。

### 主要功能
- 智能投喂和自动补水
- 自动铲屎系统
- 猫咪皮肤病图像识别
- 猫咪健康状况AI监测
- 实时视频监控
- 微信小程序远程控制与监测

### 技术创新点
- 利用OpenMV作为摄像头采集图像数据，进行猫的皮肤病识别
- 通过串口将图像数据传输至STM32H743VIT6单片机
- 在STM32上部署AI模型，结合温湿度和猫咪进食饮水次数分析健康状况
- 通过华为云IoT服务实现数据上传至微信小程序
- 实现实时图像采集和传输，提供远程视频监控功能

### 系统架构
- **硬件层**：OpenMV摄像头、STM32H743VIT6单片机、传感器组、执行机构
- **软件层**：图像处理算法、健康监测AI模型、单片机控制程序
- **云服务层**：华为云IoT服务
- **应用层**：微信小程序用户界面

## 本文档说明
本README文件记录了项目的开发进度和学习过程，主要包括微信小程序的学习与开发、嵌入式硬件的配置与开发等方面。文档会持续更新，以便团队成员了解项目进展，同时也为使用Cursor等工具进行开发提供上下文信息。

## 项目进度记录

### 2025年3月15日 - 微信小程序开发学习

今天开始学习微信小程序的基础知识，包括页面导航、变量定义和数据绑定等内容。重点学习了以下内容：

#### 微信小程序导航
学习了`wx.navigateTo`函数的用法，这个函数用于从当前页面导航到应用内的另一个页面。与直接改变浏览器URL不同，它保留当前页面，在上层打开新页面，用户可通过左上角返回按钮返回原页面。

javascript
wx.navigateTo({
url: '/pages/learn/learn',
})

#### 变量定义
学习了微信小程序中的变量定义方式，包括：

1. **页面数据变量(data对象)**

javascript
Page({
data: {
count: 0,
username: "张三",
students: [
{id: 1, name: "李四", score: 66},
{id: 2, name: "王五", score: 77}
],
fruits: ["苹果", "香蕉", "橙子"]
}
})

2. **普通JavaScript变量**


javascript
// var - 函数作用域变量
var userName = "张三";
// let - 块级作用域变量
let count = 0;
// const - 常量定义
const PI = 3.14159;
3. **全局变量(app.js中的globalData)**

javascript
// app.js
App({
globalData: {
userInfo: null
}
})
#### 数据更新与绑定
学习了使用`setData`方法更新页面数据并触发视图更新：
javascript
handleClick: function() {
console.log("点击");
this.setData({
count: this.data.count + 1
})
}

#### 列表渲染
学习了使用`wx:for`进行列表渲染，以及`wx:key`的重要性：
html
<view wx:for="{{students}}" wx:key="id">
学号：{{item.id}}
姓名：{{item.name}}
分数：{{item.score}}
</view>


`wx:key`属性提供了列表项的唯一标识符，帮助微信小程序在数据变化时高效更新DOM。而`item`和`index`是微信小程序提供的默认变量名，分别表示当前遍历到的数组元素和索引。

#### 数组操作
学习了在微信小程序中定义和操作数组的方法，包括添加、删除和更新数组元素：
javascript
// 添加元素
this.setData({
fruits: [...this.data.fruits, "草莓"]
});
// 删除元素
const newFruits = this.data.fruits.slice();
newFruits.splice(index, 1);
this.setData({
fruits: newFruits
});
// 更新元素
this.setData({
[students[${index}].score]: newScore
});


### 2025年3月15日 - 微信小程序与项目结构规划

今天继续学习微信小程序开发，同时开始规划项目的整体结构。

已创建了基本的项目文件夹结构：
- `emb/` - 存放最终的项目代码
  - `emb_WX/` - 微信小程序代码
- `test/` - 存放测试和学习代码
  - `learn/` - 微信小程序学习示例

目前项目架构规划如下：
1. OpenMV负责图像采集和初步处理
2. STM32H743VIT6处理OpenMV传来的数据和其他传感器数据
3. 通过华为云IoT平台将数据传输到微信小程序
4. 微信小程序提供用户界面和控制功能

下一步计划：
1. 完成微信小程序基础功能开发
2. 配置STM32开发环境
3. 测试OpenMV与STM32的串口通信
4. 建立华为云IoT平台连接

微信小程序端计划实现以下页面：
- 首页：实时监控视图和基本状态
- 控制页：手动控制喂食、补水等功能
- 健康统计：显示猫咪的健康状态数据
- 设置页：系统参数配置

今天已经创建了学习用的页面，并实践了数据绑定和列表渲染功能。接下来将继续深入学习微信小程序的组件和API使用方法。

（以上进度记录基于实际项目发展情况，将持续更新）